The book  https://www.amazon.ca/Concurrent-Euclid-Unix-System-Tunis/dp/0201106949 contains an implementation of a multi-tasking kernel in it appendix. 

I found it instructive to see time-shared multi-tasking stripped down to its bare essentials.
